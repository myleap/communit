<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
        <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
        <title>用户中心</title>
        <link href="__STATIC__/css/Hui.css" rel="stylesheet" type="text/css" />
        <script src="__STATIC__/js/H.js" type="text/javascript"></script>
        <script src="__STATIC__/js/vue.min.js" type="text/javascript"></script> 
        <script src="__STATIC__/js/common/user.js" type="text/javascript"></script>
        <script src="__STATIC__/js/common/utils.js" type="text/javascript"></script>
        <script src="__STATIC__/js/common/jquery.js" type="text/javascript"></script>
        <style type="text/css">
            [v-cloak] {
                display: none;
            }
        </style>
    </head>
    <body>
        <div id="ucenter" v-cloak>
            <div @click="login" class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-both-after H-margin-vertical-top-10 H-vertical-middle H-touch-active">
                <div class="H-padding-horizontal-left-10 H-padding-vertical-both-5"><img v-bind:src="headimg" class="H-height-50 H-vertical-align-middle H-width-50 H-border-radius-circle" /></div>
                <div class="H-flex-item H-padding-horizontal-both-8">{{nickname}}</div>
                <span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
            </div>
            <div v-if="isManager" @click ="checkjoin" class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active">
                <span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-user H-font-size-22 H-vertical-middle H-theme-font-color5"></i></span>
                <div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
                    申请管理
                </div>
                <span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
            </div>
            <div @click ="certification" class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active">
                <span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-passuser H-font-size-22 H-vertical-middle H-theme-font-color5"></i></span>
                <div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
                    实名认证
                </div>
                <span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
            </div>

            <!--            <div class="H-accordion-area">
                            <div @click="toggle" class="H-accordion-title H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active">
                                <span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-ding-fill H-font-size-22 H-vertical-middle H-theme-font-color5"></i></span>
                                <div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">关注设置</div>
                                <span class="H-icon H-padding-horizontal-right-8 H-display-block"><i class="H-accordion-icon H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
                            </div>
                            <div class="H-accordion-main  H-theme-background-color-white H-border-vertical-bottom-after H-display-none-important">
                                <div class="H-padding-horizontal-left-25">
                                    <div @click = "stock" class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active">
                                        <div class="H-flex-item  H-font-size-16 H-padding-vertical-both-12">
                                            自选股设置
                                        </div>
                                        <span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
                                    </div> 
                                    <div  class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active">
                                        <div class="H-flex-item H-font-size-16 H-padding-vertical-both-12">
                                            行业设置
                                        </div>
                                        <span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
                                    </div> 
                                    <div  class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active">
                                        <div class="H-flex-item H-font-size-16 H-padding-vertical-both-12">
                                            概念设置
                                        </div>
                                        <span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
                                    </div> 
                                    <div  class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active">
            
                                        <div class="H-flex-item H-font-size-16 H-padding-vertical-both-12">
                                            区域设置
                                        </div>
                                        <span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
                                    </div> 
                                </div>
                            </div>
                        </div>-->
            <div @click ="setting" class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active">
                <span class="H-icon H-display-block H-margin-horizontal-left-10"><i class="H-iconfont H-icon-edit H-font-size-22 H-vertical-middle H-theme-font-color5"></i></span>
                <div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
                    设置
                </div>
                <span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
            </div>
        </div>
        <script type="text/javascript">
var user;
window.onload = function () {
    if ($user.checkLogin(JSON.parse(window.localStorage.getItem("user_info")))) {
        user = JSON.parse(window.localStorage.getItem("user_info"));
    }
    var listVue = new Vue({
        el: '#ucenter',
        data: {
            headimg: "__ROOT__/image/logo.png",
            nickname: "未登录",
            isManager: "false"
        },
        created: function () {
            if(user)
            this.isManager = user.isManager
        },
        methods: {
            setting: function () {
                H.openWin('setting_win', '__ROOT__/index.php/main/usersetting/usersettingwin');
            },
            certification: function () {
                if (!user)
                    alert("请先登录");
                else {
                    if (user.user_status === "2")
                        H.openWin('setting_win', '__ROOT__/index.php/main/certification/certificationwin');
                    else if (user.user_status === "3") {
                        alert("已提交认证！，请等待管理人员审核");
                    } else {
                        alert("已认证");
                    }

                }

            },
            checkjoin: function () {
                H.openWin('checkjoin', '__ROOT__/index.php/main/groupsetting/checkjoinwin');
            },
            stock: function () {
                H.openWin('setting_win', '__ROOT__/index.php/main/stock/stockwin');
            },
            login: function () {
                if ($user.checkLogin(JSON.parse(window.localStorage.getItem("user_info")))) {
                    alert("已登录");
                }
            },
            toggle: function () {
                var area = H.getParents(event.target, "H-accordion-area");
                var title = H.D(".H-accordion-title", area);
                var main = H.D(".H-accordion-main", area);
                var icon = H.D(".H-accordion-icon", area);
                if (H.isElement(main)) {
                    if (H.hasClass(main, "H-display-none-important")) {

                        H.removeClass(icon, "H-icon-arrow-right");
                        H.addClass(icon, "H-icon-arrow-up");
                        H.removeClass(title, "H-theme-background-color-white");
                        H.addClass(title, "H-theme-background-color-f4f4f4");
                        H.removeClass(main, "H-display-none-important");
                    } else {
                        H.removeClass(icon, "H-icon-arrow-up");
                        H.addClass(icon, "H-icon-arrow-right");
                        H.removeClass(title, "H-theme-background-color-f4f4f4");
                        H.addClass(title, "H-theme-background-color-white");
                        H.addClass(main, "H-display-none-important");
                    }
                }
            }
        }
    });
    if (window.localStorage.getItem("user_info")) {
        listVue.headimg = user.avatar;
        listVue.nickname = user.user_nicename;
    }
    window.addEventListener("storage", function (e) { 
        if (window.localStorage.getItem("user_info")) {
            var ui = JSON.parse(window.localStorage.getItem("user_info"));
            listVue.headimg = ui.avatar;
            listVue.nickname = ui.user_nicename;
        } else {
            listVue.headimg = "__ROOT__/image/logo.png";
            listVue.nickname = "未登录";
        } 
    }, true);  
}
// function setting() {
//     H.openWin('setting_win', '__ROOT__/index.php/main/usersetting/usersettingwin');
// }
// function certification() {
//     H.openWin('setting_win', '__ROOT__/index.php/main/certification/certificationwin');
// }
// function stock() {
//     H.openWin('setting_win', '__ROOT__/index.php/main/stock/stockwin');
// }
        </script>
    </body>


</html>